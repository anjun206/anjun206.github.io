
# OSI 7 Layer, TCP/IP Layer

## 각 계층 핵심 정리 (TCP/IP 중심, OSI 매핑 표시)

### 1) Link (OSI 1–2)

* **역할:** 같은 네트워크(브로드캐스트 도메인) 안에서 프레임을 전달. 오류검출(FCS), MAC 주소 이용
* **장비:** 스위치(L2), AP(무선). 허브(L1, 요즘 거의 X)
* **키워드:** MAC(48비트), 이더넷 헤더, MTU(보통 1500), VLAN(802.1Q), CSMA/CD(유선 옛개념), Wi-Fi 관리 프레임

### 2) Internet (OSI 3)

* **역할:** **라우팅**과 **논리 주소(IP)** 기반의 패킷 전달
* **프로토콜:** IPv4/IPv6, ICMP(오류/진단), ARP(IPv4의 L2 주소 해석), NDP(IPv6)
* **키워드:** 서브넷/게이트웨이, 라우팅 테이블, TTL/Hop Limit, **NAT/PAT**, Path MTU Discovery(IPv6은 라우터 단편화 없음)

### 3) Transport (OSI 4)

* **역할:** 프로세스 간 통신(포트 번호) + 신뢰성/순서/흐름/혼잡 제어
* **TCP:** 연결지향, 순서 보장, 재전송, **흐름 제어(Receive Window)**, **혼잡 제어(AIMD, CUBIC 등)**, 3-way handshake(SYN→SYN/ACK→ACK)
* **UDP:** 연결 없음, 순서/재전송 없음, 지연/오버헤드 최소 (DNS, VoIP, 스트리밍)
* **포트:** 0–65535 (Well-Known 0–1023; 예: 80/443/22/53)

### 4) Application (OSI 5–7)

* **역할:** 실제 애플리케이션 프로토콜. 표현/세션도 이 계층에 포함해 다룬다고 보는 게 TCP/IP 관행
* **예시:** HTTP/HTTPS, DNS, DHCP, SMTP/IMAP, SSH, FTP, TLS(암호화), **QUIC(UDP 기반, TLS 내장, 0-RTT)**
* **소켓 API와의 관계:** `socket/bind/listen/accept/connect/send/recv`는 **응용 ↔ 전송** 사이 인터페이스(커널 제공)

<br><br>

## 주소/식별자 4종 요약

* **URL/도메인**(사람 친화 이름) → **DNS**가 **IP 주소**로 변환
* **IP 주소**(네트워크 경로 결정) → **ARP/NDP**가 **MAC 주소**로 변환(동일 L2 내)
* **포트 번호**(프로세스 식별) → 같은 IP에서 여러 서비스 동시 실행 가능
* **MAC 주소**(L2 식별) → 스위치가 프레임 전달에 사용

<br><br>

## 장비 관점 한 줄 요약

* **허브(L1):** 모든 포트로 브로드캐스트(거의 사용 X)
* **스위치(L2):** MAC 테이블로 프레임 스위칭, VLAN 분할
* **라우터(L3):** 서브넷 간 라우팅, NAT, 방화벽 정책
* **L4 로드밸런서/프록시:** 포트/세션 관점의 분산, TLS 종료 등

<br><br>

## 자주 나오는 비교 포인트

* **흐름 제어 vs 혼잡 제어:**

  * 흐름(Flow): 수신자가 감당할 수 있도록 속도 조절(Receiver Window)
  * 혼잡(Congestion): 네트워크 혼잡을 피하도록 전송률 조절(CWND, Slow Start, AIMD)
* **TCP vs UDP:** 신뢰/순서/혼잡 제어 필요하면 TCP, 저지연/단순 전송이면 UDP
* **NAT vs 프록시:** NAT는 L3/4에서 주소/포트 변환(PAT), 프록시는 L7에서 요청을 대신 수행

<br><br>

## 표로 비교 OSI ↔ TCP/IP 매핑

| OSI 7계층              | 역할(간단)      | TCP/IP 계층 매핑            | PDU 이름                   | 대표 장비/기술     | 대표 프로토콜/예                                            |
| -------------------- | ----------- | ----------------------- | ------------------------ | ------------ | ---------------------------------------------------- |
| 7. 응용 (Application)  | 앱 기능/프로토콜   | **Application**         | 데이터 (Data)               | — (소프트웨어)    | HTTP(S), DNS, DHCP, SMTP/IMAP, SSH, FTP, TLS, QUIC\* |
| 6. 표현 (Presentation) | 인코딩/압축/암호   | (TCP/IP에선 응용에 포함)       | 데이터                      | —            | TLS(암호화), JSON/ProtoBuf                              |
| 5. 세션 (Session)      | 세션 관리/동기화   | (TCP/IP에선 응용에 포함)       | 데이터                      | —            | RPC, gRPC                                            |
| 4. 전송 (Transport)    | 종단 간 신뢰/순서  | **Transport**           | 세그먼트 (TCP) / 데이터그램 (UDP) | L4 로드밸런서     | TCP, UDP                                             |
| 3. 네트워크 (Network)    | 경로 결정/라우팅   | **Internet**            | 패킷 (Packet)              | 라우터          | IP(IPv4/IPv6), ICMP, ARP\*, NDP                      |
| 2. 데이터링크 (Data Link) | 이더넷 프레임/스위칭 | **Link/Network Access** | 프레임 (Frame)              | 스위치, AP      | 이더넷(802.3), Wi-Fi(802.11), VLAN(802.1Q)              |
| 1. 물리 (Physical)     | 전기/광 신호     | **(Link 하위)**           | 비트 (Bit)                 | 케이블, 리피터, 허브 | UTP, 광케이블                                            |

\* ARP(Address Resolution Protocol)는 IP↔MAC 해석(실무에선 L2/L3 경계 기능)<br>
\* QUIC은 UDP 위에서 **전송+세션+암호화**를 포함하는 현대식 L4.5/L7 성격
