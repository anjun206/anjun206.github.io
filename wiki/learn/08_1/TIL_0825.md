# TIL 25

오늘의 목표는 묵시적 할당기인 동적 할당기를 명시적 할당기로 전환하는게 목표다

이중 연결리스트 방식이기에 pred/succ 만들어 연결해 줄거다

최소 할당 크기 변환도 고려해보았는데 16바이트 안에 다 들어가니까 문제 없을 거 같다

실제 가용 블록 될때에는 사용자가 알아서 쓸테니까 걍 페이지로드에 pred/succ 박아놓을 계획이다

뭐, 정 문제 생기면 페이지로드 초기화 명령어 넣으면 되겠지

<br>

## 목표

일단 바꿀 목표부터 정하고 이뤄나가야 겠다

- [ ] pred/succ 매크로
- [ ] 힙 익스텐드에 pred/succ 배치
- [ ] 배치과정에 리스트 연결 조작
- [ ] free 과정에 리스트 연결 조작
- [ ] 병합 과정에 리스트 연결 조작
- [ ] realloc 과정에 리스트 연결 조작

모아놓고 보니 전부 같은 소리긴 하다

<br>

### pred/succ매크로

```c
/* 추가 확장으로 pred/succ */
#define PRED_FIELD(bp)    ((char *)(bp) + 0)
#define SUCC_FIELD(bp)    ((char *)(bp) + PSIZE)

/* pred/succ 접근 매크로 */
#define GET_PRED(bp)      ((void*)GET(PRED_FIELD(bp)))
#define SET_PRED(bp, x)   (PUT(PRED_FIELD(bp), (unsigned int)(x)))
#define GET_SUCC(bp)      ((void*)GET(SUCC_FIELD(bp)))
#define SET_SUCC(bp, x)   (PUT(SUCC_FIELD(bp), (unsigned int)(x)))
```

pred는 페이로드 시작이니 걍 bp로 가리키고 succ는 포인터 사이즈 만큼 이동해서 다시 가리키면 된다

그리고 값 접근하는 경우는 매번 타입 캐스팅하고 이런거 자신 없어서 한번에 다 정해줬다

<br><br>

- [X] pred/succ 매크로
- [ ] 힙 익스텐드에 pred/succ 배치
- [ ] 배치과정에 리스트 연결 조작
- [ ] free 과정에 리스트 연결 조작
- [ ] 병합 과정에 리스트 연결 조작
- [ ] realloc 과정에 리스트 연결 조작

다음으로 가자

<br>

### 힙 익스텐드

