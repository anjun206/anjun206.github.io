# AWS

오늘은 AWS 특강이다

아마존 웹 서비스 ㅇㅇ

50분 강의 10분 휴식으로 총 6교시까지 한다

VPC (Virtual Private Cloud)

**REGION** 리전
최소 가용역역 3개 묶음

**AVAILABILITY ZONE** 가용영역
가용가능한 데이터 센터

LOCAL ZONES

**POINTS OF PRESENCE**
세계적으로 서버 분산해 서비스 캐싱해놓음으로써 대기 시간 단축
WAVELENGTH ZONES

DIRECT CONNECT LOCATIONS

OUTPOSTS

## AWS 리전

유저랑 가까운 곳으로 연결된다

네트워크도 물리적 영향을 받는다

## VPC

논리적으로 격리된 가상의 프라이빗 네트워크 환경

가상 네트워크 제어 기능
IP 주소 범위, 서브네팅, 라우팅, 보안그룹

CIDR 블록으로 VPC 크기를 지정하여 생성
/16 ~ /28

VPC는 리전 레벨이다

하나씩은 기본으로 제공해준다

필요에 따라 커스텀이 필요할 확률이 농후하다

### VPC 구성

1. VPC 네트워크 IP 영역 정의

2. 가용 영역별 서브넷 지정

3. 라우팅 테이블 생성 및 연결

4. 트래픽 점근 제어

```TXT
VPC IP 대역 정의
    대역   / 프리픽스
172.31.0.0 /   16
```
권장 대역: RFC1918 대역

권장 프리픽스: /16 (65,536)

## CIDR

무슨 표시 뭐라고 한다

## VPC 서브넷

VPC 내부를 서브넷으로 쪼갠다

각 서브넷을 용도에 따라 분리한다 (EX: 웹서버, DB 등)

VPC 대역 내에서 내역을 또 쪼갠다

## 라우팅 테이블 - 로컬 통신

VPC 생성 - 기본 라우팅 테이블

VPC 대역 내 라우팅

## 라우팅 테이블 - 인터넷 통신

인터넷과 연결을 위해 라우팅 테이블에 새 주소를 추가해줘야 한다

## 퍼블릭 서브넷과 프라이빗 서브넷

갖고 있는 라우팅 테이블에 따라 갈린다

인터넷 게이트웨이와 직접적 연결이 둘을 가르는 특성이다

## 프라이빗 서브넷의 인터넷 통신

프라이빗 서브넷으로 하여금 인터넷과 통신하고 싶다하면

퍼블릭 서브넷 걸쳐 지나가게 구성한다

NAT 게이트웨이 사용해서

## DNS와 DHCP

DHCP: 자동 IP 할당

DNS: 자동 도메인 할당

## Public IP

퍼블릭 서브넷의 IP중 Public IP가 있어야 실제로 외부와 통신 가능함

on/off 마다 Public IP가 바뀌고 이게 싫다면 EIP 사용해야 한다

Elastic IP

# 액세스 제어

## VPC에서 액세스 제어

NALC, 보안그룹 존재

### NACL (Network Access Control List)

서브넷 단위 방화벽

상태 비저장(Stateless)
나가고 들어오는 상태 저장안함

Allow, Deny 설정 가능
들어오는 트래픽 허용, 거부 설정 가능

### 보안그룹

인스턴스(ENI) 단위 방화벽

상태 저장(Stateful)
들어오고 나가는 상태 저장 (허용, 비허용)

Allow만 가능
트래픽 허용한거만 들어올 수 있음


### NACL과 보안그룹

NACL이 좀 더 넓은 범위 같음

# Amazone EC2 개요

## 서버 구성 요소

하드웨어, 네트워크, OS, 보안

## EC2

대충 EC2의 장점들 설명해준다

## EC2의 호스트 가상화

일종의 가상 머신이라고 한다

(좋은 서버 쪼개서 사용)

## Amazone Machine Image (AMI)

서버 어떻게 구성할지에 대해 적혀있는

일종의 템플릿 파일이다

## Amazone EC2 인스턴스 스토어

단기 스토리지

속도 빠르지만 안정성이 낮음

장기저장에 부적합

## Amazone Elastic Block Store (Amazone EBS)

영구 스토리지

여러 이유로 인해 이거 쓰는 거 권장

## Amazone EC2 수명 주기

실행중

정지됨

종료됨

## Amazone EC2 인스턴스 유형

카테고리, 기능, 옵션

### 인스턴스 명명 규칙

```txt
예시: c7gn.xlarge

종류, 세대, 추가기능, 인스턴스 크기
   c   7      gn    .    xlarge
```

# 컴퓨팅 관련 서비스

## Elastic Load Balancing (ELB)

네트워크 트래픽 분산

로드 밸런서

## ELB - 종류

앱: 7계층

네트워크: 4계층

게이트 웨이: 3계층

## Amazone EC2 Auto Scaling

변화하는 수요에 따라 동적 대응

서버 늘리거나 줄이거나

## 사용자 데이터

쉘스크립트 방식

## Amazon EC2 연결을 위한 자격 증명

EC2 키페어

표준 SSH RSA 키 페어

## Amazon EC2 Instance Connect

Secure Shell(SSH)을 사용하여 인스턴스에 연결

# 실습

EC2 서버 만들때

부하 테스트용으론 t말고 c라는데 이유는 모름

NAT 존재 이유중 하는 오픈소스 다운 받으려면 프라이빗 이더라도 인터넷 연결 필요

# 데이터베이스

## 오로라

로컬 특화라는 거 같다

클라우드용?

MySQL, PostgreSQL 호환 데이터 베이스

데이터 복제 방식이 더 효율적이라는 거 같다

오로라 장점 이것저것 얘기해준다

자세히는 몰라도 될 거 같다 ㅇㅇ

성능 개선 도우미라는 Performance Insights로 Database 성능 볼 수 있으니

이거 참고해서 부하 보거나 하며 대응 가능하니 이것 정도 알아두면 될듯하다

## S3

접근 시간에 따라 비용을 다르게 할 수 있다

라이프사이클 정책으로 자동화도 가능하다
안쓸수록 더 싸고 느린 단계로 이동

# 실습

IAM 유저 쓰고 루트 계정은 어지간하면 금지
털리면 비상임

application 로드 밸런서

네트워크 로드 밸런서

네트워크 로드 밸런서가 좀 더 유연하고 클라우드 친화적이다

